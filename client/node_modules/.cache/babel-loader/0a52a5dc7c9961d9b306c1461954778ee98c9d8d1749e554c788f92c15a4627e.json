{"ast":null,"code":"import _slicedToArray from\"/Users/danielyun/Desktop/s/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Deposit_withdraw_form from'./Deposit_withdraw_form';import Sell from'./Sell';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var keys=require(\"../keys\");function Profile(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];useEffect(function(){fetch(\"\".concat(keys.url_encrypt.key,\"/auth/profile\")).then(function(response){return response.json();}).then(function(data){console.log(data);setResult(data);}).catch(function(err){return console.log(err);});},[]);if(result!=null){var user=result.user?result.user:\"none\";var cash=typeof result.cash==\"none\"?0:Number(result.cash).toFixed(2);var stock_symbols=typeof result.stock_symbols===\"undefined\"?\"No stocks yet\":result.stock_symbols;var all_stocks=typeof result.stocks===\"undefined\"?\"No stocks yet\":result.stocks;return/*#__PURE__*/_jsxs(\"div\",{className:\"profile_page\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Hello, \",/*#__PURE__*/_jsx(\"i\",{children:user})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cash\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",cash]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Deposit_withdraw_form,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"investments\",children:stock_symbols.length===0?/*#__PURE__*/_jsx(\"h2\",{children:\"Start trading today!\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:stock_symbols.map(function(stock){var symbol=stock.symbol;var company=stock.company;var count=stock.count;var total_purchased_price=0;//Get the total amount spent on this stock\nall_stocks.map(function(obj){if(obj.symbol===symbol){total_purchased_price+=Number(obj.price_purchased);}});return/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item bg-transparent text-white border-0\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"stock_display\",children:[/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(\"i\",{children:symbol})})}),\" \\xA0\\xA0 x\",count]}),/*#__PURE__*/_jsx(Sell,{before:total_purchased_price,symbol:symbol,shares:count}),/*#__PURE__*/_jsx(\"br\",{})]});})})})]});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"profile_page\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Please login again\"})});}}export default Profile;","map":{"version":3,"names":["useState","useEffect","Deposit_withdraw_form","Sell","jsx","_jsx","jsxs","_jsxs","keys","require","Profile","_useState","_useState2","_slicedToArray","result","setResult","fetch","concat","url_encrypt","key","then","response","json","data","console","log","catch","err","user","cash","Number","toFixed","stock_symbols","all_stocks","stocks","className","children","length","map","stock","symbol","company","count","total_purchased_price","obj","price_purchased","before","shares"],"sources":["/Users/danielyun/Desktop/s/client/src/components/Profile.js"],"sourcesContent":["import {useState, useEffect} from 'react';\nimport Deposit_withdraw_form from './Deposit_withdraw_form';\nimport Sell from './Sell';\nconst keys = require(\"../keys\");\n\nfunction Profile() {\n\n    const [result, setResult] = useState(null);\n\n    useEffect(() => {\n        fetch(`${keys.url_encrypt.key}/auth/profile`)\n        .then(response => response.json())\n        .then(data => {console.log(data); setResult(data)})\n        .catch(err => console.log(err));\n    }, [])\n\n    if(result != null)\n    {\n        const user = result.user ? result.user : \"none\";\n        const cash = typeof(result.cash) == \"none\" ? 0 : Number(result.cash).toFixed(2);\n        const stock_symbols = typeof(result.stock_symbols) === \"undefined\" ? \"No stocks yet\" : result.stock_symbols;\n        const all_stocks = typeof(result.stocks) === \"undefined\" ? \"No stocks yet\" : result.stocks;\n\n        return (\n            <div className=\"profile_page\">\n                <br />\n                <h3>Hello, <i>{user}</i></h3>\n                \n                <div className=\"cash\">\n                    <h3>${cash}</h3>\n                    <br />\n                    <Deposit_withdraw_form />\n                </div>\n               \n                <div className=\"investments\">\n\n                    {stock_symbols.length === 0 ? <h2>Start trading today!</h2> : \n                    \n                        <ul className=\"list-group list-group-flush\">\n                            {\n                                stock_symbols.map(stock => {\n                                    const symbol = stock.symbol;\n                                    const company = stock.company;\n                                    const count = stock.count;\n                                    var total_purchased_price = 0;\n\n                                    //Get the total amount spent on this stock\n                                    all_stocks.map(obj => {\n                                        if(obj.symbol === symbol) { \n                                            total_purchased_price += Number(obj.price_purchased);\n                                        }\n                                    })\n\n                                    return (\n                                        <li className=\"list-group-item bg-transparent text-white border-0\">\n                                            <p className=\"stock_display\">\n                                                {/* <h3 className=\"stock_display\">{company}</h3> &nbsp; */}\n                                                <b><h4><i>{symbol}</i></h4></b> &nbsp;&nbsp;\n                                                x{count} \n                                            </p>\n                                            <Sell before={total_purchased_price} symbol={symbol} shares={count}/>\n                                            <br />\n                                        </li>\n\n                                    )\n                                })\n                            }\n                        </ul>\n                    }\n                </div>\n            </div>\n            \n        )\n    }\n    else \n    {\n        return (\n            <div className=\"profile_page\">\n                <h2>Please login again</h2>\n            </div>\n        )\n    }\n    \n}\n\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}