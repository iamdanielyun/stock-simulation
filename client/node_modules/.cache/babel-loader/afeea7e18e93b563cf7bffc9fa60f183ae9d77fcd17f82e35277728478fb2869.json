{"ast":null,"code":"var _jsxFileName = \"/Users/danielyun/Desktop/s/client/src/components/Sell.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport keys from '../keys';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Sell(props) {\n  _s();\n  const symbol = props.symbol;\n  const shares = props.shares;\n  const total_purchased_price = Number(props.before).toFixed(2);\n  const [price, setPrice] = useState(\"...\");\n  const [msg, setMsg] = useState(\"\");\n  const navigate = useNavigate();\n\n  //get current_price\n  useEffect(() => {\n    fetch(`${keys.url_encrypt.key}/api/current_price/${symbol}`).then(response => response.json()).then(data => {\n      setPrice(data.current_price);\n    }).catch(err => console.log(err));\n  }, []);\n  const total_current_price = isNaN(price) ? \"...\" : Number(price * shares).toFixed(2);\n  const diff = 1.0 * (total_current_price - total_purchased_price) / total_purchased_price; //to do decimal division and no integer rounding\n  const percent_change = isNaN(price) ? \"...\" : Number(diff * 100).toFixed(2);\n  const color = percent_change > 0 ? \"positive_arrow\" : \"negative_arrow\";\n  const arrow = percent_change > 0 ? \"↑\" : \"↓\";\n\n  //handle sell\n  function sell(e) {\n    e.preventDefault();\n    const shares_to_sell = document.getElementById(symbol).value;\n    console.log(\"shares to sell: \" + shares_to_sell);\n    console.log(\"shares owned: \" + shares);\n    if (shares_to_sell <= 0) setMsg(\"Please enter a valid number of shares\");else if (shares_to_sell > shares) setMsg(\"That's more than what you own!\");else {\n      fetch(`${keys.url_encrypt.key}/auth/action`, {\n        method: \"POST\",\n        body: JSON.stringify({\n          action: \"sell\",\n          symbol: symbol,\n          price: price,\n          shares_to_sell: shares_to_sell,\n          shares_owned: shares\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(data => {\n        setMsg(data.message);\n        if (data.message === \"success\") {\n          navigate(\"/profile\");\n          window.location.reload(true);\n        }\n      }).catch(err => console.log(err));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"stock_display\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"$\", total_purchased_price, \" \", \"   --->   \", \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n        className: color,\n        children: [\"$\", total_current_price, \" \", arrow, \"(\", percent_change, \"%)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 57\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => sell(e),\n      className: \"sell_form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          min: \"1\",\n          type: \"number\",\n          className: \"form-control\",\n          id: symbol,\n          placeholder: \"# shares\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), msg != \"\" && msg != \"success\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error_msg\",\n        children: [\"*\", msg, \"*\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Sell\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n}\n_s(Sell, \"I1iSUV6QvGWwgFtk9aMQJSE9eNE=\", false, function () {\n  return [useNavigate];\n});\n_c = Sell;\nexport default Sell;\nvar _c;\n$RefreshReg$(_c, \"Sell\");","map":{"version":3,"names":["useState","useEffect","useNavigate","keys","jsxDEV","_jsxDEV","Sell","props","_s","symbol","shares","total_purchased_price","Number","before","toFixed","price","setPrice","msg","setMsg","navigate","fetch","url_encrypt","key","then","response","json","data","current_price","catch","err","console","log","total_current_price","isNaN","diff","percent_change","color","arrow","sell","e","preventDefault","shares_to_sell","document","getElementById","value","method","body","JSON","stringify","action","shares_owned","headers","message","window","location","reload","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","min","type","id","placeholder","_c","$RefreshReg$"],"sources":["/Users/danielyun/Desktop/s/client/src/components/Sell.js"],"sourcesContent":["import {useState, useEffect} from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport keys from '../keys';\n\nfunction Sell(props) {\n\n    const symbol = props.symbol;\n    const shares = props.shares;\n    const total_purchased_price = Number(props.before).toFixed(2);\n    const [price, setPrice]  = useState(\"...\");\n    const [msg, setMsg] = useState(\"\");\n    const navigate = useNavigate();\n\n    //get current_price\n    useEffect(() => {\n        fetch(`${keys.url_encrypt.key}/api/current_price/${symbol}`)\n        .then(response => response.json())\n        .then(data => {\n            setPrice(data.current_price);\n        })\n        .catch(err => console.log(err));\n    }, [])\n\n    const total_current_price = isNaN(price) ? \"...\" : Number(price*shares).toFixed(2);\n    const diff = (1.0 * (total_current_price -  total_purchased_price)) / total_purchased_price;     //to do decimal division and no integer rounding\n    const percent_change = isNaN(price) ? \"...\" : Number(diff * 100).toFixed(2);\n    const color = percent_change > 0 ? \"positive_arrow\" : \"negative_arrow\";\n    const arrow = percent_change > 0 ? \"↑\" : \"↓\";\n\n    //handle sell\n    function sell(e) {\n        e.preventDefault();\n        const shares_to_sell = document.getElementById(symbol).value;\n\n        console.log(\"shares to sell: \" + shares_to_sell)\n        console.log(\"shares owned: \" + shares)\n\n        if(shares_to_sell <= 0)\n            setMsg(\"Please enter a valid number of shares\");\n        else if(shares_to_sell > shares)\n            setMsg(\"That's more than what you own!\");\n        else\n        {\n            fetch(`${keys.url_encrypt.key}/auth/action`, {\n                method: \"POST\",\n                body: JSON.stringify({\n                    action: \"sell\",\n                    symbol: symbol,\n                    price: price,\n                    shares_to_sell: shares_to_sell,\n                    shares_owned: shares\n                }),\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then(response => response.json())\n            .then(data => {\n                setMsg(data.message);\n    \n                if(data.message === \"success\")\n                {\n                    navigate(\"/profile\");\n                    window.location.reload(true);      \n                }\n            })\n            .catch(err => console.log(err));\n        }\n    }\n\n    return (\n        <div className=\"stock_display\">\n            <div>\n                ${total_purchased_price} {\"   --->   \"} <p className={color}>${total_current_price} {arrow}({percent_change}%)</p>\n            </div>\n\n            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n\n            <form onSubmit={(e) => sell(e)} className=\"sell_form\">\n                <div className=\"form-group\">\n                    <input min=\"1\" type=\"number\" className=\"form-control\" id={symbol} placeholder=\"# shares\"></input>\n                </div>\n\n                {\n                    msg != \"\" && msg != \"success\"? \n                        <div className=\"error_msg\">\n                            *{msg}*\n                        </div>\n                    : null\n                }\n                <div>\n                    <button type=\"submit\" className='btn btn-primary'>Sell</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default Sell;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}