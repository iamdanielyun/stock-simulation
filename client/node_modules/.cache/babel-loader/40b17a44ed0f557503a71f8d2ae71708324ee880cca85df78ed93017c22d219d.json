{"ast":null,"code":"import _slicedToArray from\"/Users/danielyun/Desktop/s/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useNavigate}from\"react-router-dom\";import useCheck_auth from\"./auth/useCheck_auth\";import keys from'../keys';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Purchase_form(props){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setMsg=_useState2[1];var authenticated=useCheck_auth();var buttonClass=authenticated?\"btn btn-primary\":\"btn btn-primary disabled\";//Purchase function\nfunction purchase(e){e.preventDefault();var shares=document.getElementById(\"shares\").value;var symbol=props.symbol;var price=props.price;var name=props.name;if(shares>0){fetch(\"\".concat(keys.url_encrypt.key,\"/auth/action\"),{method:\"POST\",body:JSON.stringify({action:\"buy\",symbol:symbol,shares:shares,price:price,name:name}),headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){setMsg(data.message);if(data.message===\"success\"){navigate(\"/profile\");window.location.reload(true);}}).catch(function(err){return console.log(err);});}else setMsg(\"Please order a valid number of shares\");}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return purchase(e);},className:\"purchase_form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{min:\"1\",type:\"number\",className:\"form-control\",id:\"shares\",placeholder:\"# shares\"})}),msg!=\"\"&&msg!=\"success\"?/*#__PURE__*/_jsxs(\"div\",{className:\"error_msg\",children:[\"*\",msg,\"*\"]}):null,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:buttonClass,children:\"Order\"}),!authenticated?/*#__PURE__*/_jsx(\"div\",{className:\"purchase_unathenticated\",children:/*#__PURE__*/_jsxs(\"i\",{children:[\"Please \",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"login\"})]})}):null]});}export default Purchase_form;","map":{"version":3,"names":["useState","useEffect","useNavigate","useCheck_auth","keys","jsx","_jsx","jsxs","_jsxs","Purchase_form","props","navigate","_useState","_useState2","_slicedToArray","msg","setMsg","authenticated","buttonClass","purchase","e","preventDefault","shares","document","getElementById","value","symbol","price","name","fetch","concat","url_encrypt","key","method","body","JSON","stringify","action","headers","then","response","json","data","message","window","location","reload","catch","err","console","log","onSubmit","className","children","min","type","id","placeholder","href"],"sources":["/Users/danielyun/Desktop/s/client/src/components/Purchase_form.js"],"sourcesContent":["import {useState, useEffect} from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport useCheck_auth from \"./auth/useCheck_auth\";\nimport keys from '../keys';\n\nfunction Purchase_form(props) {\n\n    const navigate = useNavigate();\n    const [msg, setMsg] = useState(\"\");\n    const authenticated = useCheck_auth();\n    var buttonClass = authenticated ? \"btn btn-primary\" : \"btn btn-primary disabled\";\n\n    //Purchase function\n    function purchase(e) {\n        e.preventDefault(); \n        const shares = document.getElementById(\"shares\").value;\n        const symbol = props.symbol;\n        const price = props.price;\n        const name =  props.name;\n\n        if(shares > 0) {\n            fetch(`${keys.url_encrypt.key}/auth/action`, {\n                method: \"POST\",\n                body: JSON.stringify({\n                    action: \"buy\",\n                    symbol: symbol,\n                    shares: shares,\n                    price: price,\n                    name: name\n                }),\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then(response => response.json())\n            .then(data => {\n                setMsg(data.message);\n    \n                if(data.message === \"success\")\n                {\n                    navigate(\"/profile\");\n                    window.location.reload(true);      \n                }\n            })\n            .catch(err => console.log(err));\n        }\n        else\n            setMsg(\"Please order a valid number of shares\");\n    }\n\n    return (\n        <form onSubmit={(e) => purchase(e)} className=\"purchase_form\">\n            <div className=\"form-group\">\n                <input min=\"1\" type=\"number\" className=\"form-control\" id=\"shares\" placeholder=\"# shares\"></input>\n            </div>\n            {\n                msg != \"\" && msg != \"success\"? \n                    <div className=\"error_msg\">\n                        *{msg}*\n                    </div>\n                : null\n            }\n            <button type=\"submit\" className={buttonClass}>Order</button>\n            {\n                !authenticated ?\n                    <div className=\"purchase_unathenticated\">\n                        <i>Please <a href=\"/login\">login</a></i>\n                    </div>\n                : null\n            }\n        </form>\n    )\n}\n\nexport default Purchase_form;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}